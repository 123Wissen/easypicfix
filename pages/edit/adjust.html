<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Image Adjustments - ImageTools</title>
    
    <!-- Meta tags for SEO -->
    <meta name="description" content="Adjust your images with precision. Control brightness, contrast, saturation, and more. Support for JPG, PNG, WebP formats.">
    <meta name="keywords" content="image adjustment, brightness, contrast, saturation, image editor, photo editor">
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="../../assets/images/favicon.png">
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Animate.css -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="../../styles.css">
    <style>
        .adjustment-slider {
            width: 100%;
        }
        .adjustment-value {
            min-width: 50px;
            text-align: right;
            font-weight: bold;
        }
        .preview-container {
            max-height: 500px;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: #f8f9fa;
            border-radius: 8px;
        }
        .preview-container img {
            max-width: 100%;
            max-height: 500px;
            object-fit: contain;
        }
        .adjustment-group {
            margin-bottom: 1.5rem;
        }
        .adjustment-label {
            font-weight: 500;
            margin-bottom: 0.5rem;
        }
    </style>
</head>
<body>
    <!-- Include Header -->
    <div id="header-placeholder"></div>

    <main class="container py-4">
        <div class="row">
            <div class="col-12">
                <h1 class="mb-4">Image Adjustments</h1>
                
                <!-- Upload Section -->
                <div class="upload-section mb-4">
                    <div class="upload-area text-center p-4 bg-white rounded-4 shadow-sm">
                        <input type="file" id="file-input" accept="image/*" style="display: none;">
                        <div class="upload-icon mb-3">
                            <i class="fas fa-cloud-upload-alt fa-3x text-primary"></i>
                        </div>
                        <h5 class="mb-3">Drag & Drop Your Image Here</h5>
                        <p class="text-muted mb-3">or</p>
                        <button class="btn btn-primary px-4" onclick="document.getElementById('file-input').click()">
                            Choose File
                        </button>
                        <p class="mt-3 text-muted small">Supported formats: JPG, PNG, WebP</p>
                    </div>
                </div>

                <!-- Editor Section -->
                <div class="editor-section" style="display: none;">
                    <div class="row">
                        <!-- Preview -->
                        <div class="col-lg-8 mb-4">
                            <div class="preview-container">
                                <img id="preview" src="" alt="Preview">
                            </div>
                        </div>

                        <!-- Adjustments -->
                        <div class="col-lg-4">
                            <div class="card">
                                <div class="card-body">
                                    <h5 class="card-title mb-4">Image Adjustments</h5>

                                    <!-- Brightness -->
                                    <div class="adjustment-group">
                                        <div class="d-flex justify-content-between">
                                            <label class="adjustment-label">Brightness</label>
                                            <span id="brightness-value" class="adjustment-value">0%</span>
                                </div>
                                        <input type="range" class="form-range adjustment-slider" id="brightness" min="-100" max="100" value="0">
                                </div>

                                    <!-- Contrast -->
                                    <div class="adjustment-group">
                                        <div class="d-flex justify-content-between">
                                            <label class="adjustment-label">Contrast</label>
                                            <span id="contrast-value" class="adjustment-value">0%</span>
                                </div>
                                        <input type="range" class="form-range adjustment-slider" id="contrast" min="-100" max="100" value="0">
                                </div>

                                    <!-- Saturation -->
                                    <div class="adjustment-group">
                                        <div class="d-flex justify-content-between">
                                            <label class="adjustment-label">Saturation</label>
                                            <span id="saturation-value" class="adjustment-value">0%</span>
                                </div>
                                        <input type="range" class="form-range adjustment-slider" id="saturation" min="-100" max="100" value="0">
                                </div>

                                    <!-- Sharpness -->
                                    <div class="adjustment-group">
                                        <div class="d-flex justify-content-between">
                                            <label class="adjustment-label">Sharpness</label>
                                            <span id="sharpness-value" class="adjustment-value">0%</span>
                            </div>
                                        <input type="range" class="form-range adjustment-slider" id="sharpness" min="-100" max="100" value="0">
                        </div>

                                    <!-- Temperature -->
                                    <div class="adjustment-group">
                                        <div class="d-flex justify-content-between">
                                            <label class="adjustment-label">Temperature</label>
                                            <span id="temperature-value" class="adjustment-value">0%</span>
                                </div>
                                        <input type="range" class="form-range adjustment-slider" id="temperature" min="-100" max="100" value="0">
                                </div>

                                    <!-- Tint -->
                                    <div class="adjustment-group">
                                        <div class="d-flex justify-content-between">
                                            <label class="adjustment-label">Tint</label>
                                            <span id="tint-value" class="adjustment-value">0%</span>
                            </div>
                                        <input type="range" class="form-range adjustment-slider" id="tint" min="-100" max="100" value="0">
                        </div>

                                    <!-- Action Buttons -->
                                    <div class="d-grid gap-2">
                                        <button id="apply-button" class="btn btn-primary">
                                            <i class="fas fa-check me-2"></i>Apply Changes
                                        </button>
                                        <button id="reset-button" class="btn btn-outline-secondary">
                                            <i class="fas fa-undo me-2"></i>Reset All
                                        </button>
                                        <button id="download-button" class="btn btn-success">
                                            <i class="fas fa-download me-2"></i>Download Image
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Include Footer -->
    <div id="footer-placeholder"></div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Custom JS -->
    <script type="module">
        import { ImageAdjustments } from '../../js/image-adjustments.js';
        import ComponentLoader from '../../js/component-loader.js';

        // Load header and footer
        const componentLoader = new ComponentLoader();
        componentLoader.loadComponents();

        // Initialize image adjustments
        const imageAdjustments = new ImageAdjustments({
            previewElement: '#preview',
            brightnessSlider: '#brightness',
            contrastSlider: '#contrast',
            saturationSlider: '#saturation',
            sharpnessSlider: '#sharpness',
            temperatureSlider: '#temperature',
            tintSlider: '#tint',
            brightnessValue: '#brightness-value',
            contrastValue: '#contrast-value',
            saturationValue: '#saturation-value',
            sharpnessValue: '#sharpness-value',
            temperatureValue: '#temperature-value',
            tintValue: '#tint-value',
            applyButton: '#apply-button',
            resetButton: '#reset-button',
            downloadButton: '#download-button'
        });

        // Handle file input
        const fileInput = document.getElementById('file-input');
        const uploadSection = document.querySelector('.upload-section');
        const editorSection = document.querySelector('.editor-section');

        fileInput.addEventListener('change', async (e) => {
            const file = e.target.files[0];
            if (file && file.type.startsWith('image/')) {
                uploadSection.style.display = 'none';
                editorSection.style.display = 'block';
                await imageAdjustments.loadImage(file);
            }
            });

        // Handle drag and drop
        const uploadArea = document.querySelector('.upload-area');
        ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
            uploadArea.addEventListener(eventName, preventDefaults, false);
                });

        function preventDefaults(e) {
            e.preventDefault();
            e.stopPropagation();
        }

        ['dragenter', 'dragover'].forEach(eventName => {
            uploadArea.addEventListener(eventName, () => {
                uploadArea.classList.add('drag-active');
            });
        });

        ['dragleave', 'drop'].forEach(eventName => {
            uploadArea.addEventListener(eventName, () => {
                uploadArea.classList.remove('drag-active');
                });
        });

        uploadArea.addEventListener('drop', async (e) => {
            const file = e.dataTransfer.files[0];
            if (file && file.type.startsWith('image/')) {
                uploadSection.style.display = 'none';
                editorSection.style.display = 'block';
                await imageAdjustments.loadImage(file);
            }
        });
    </script>
</body>
</html> 